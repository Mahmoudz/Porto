"use strict";(self.webpackChunkporto=self.webpackChunkporto||[]).push([[62],{4832:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var o=i(4848),t=i(8453);const r={sidebar_position:2},a="Containers Layer",s={id:"Layers/Containers Layer",title:"Containers Layer",description:"The Container layer is the heart of the Porto architecture. Here is where the application-specific business logic lives, including all the Application features and functionalities. You'll spend 90% of your time working in this layer, developing new features, and maintaining existing ones.",source:"@site/docs/Layers/Containers Layer.md",sourceDirName:"Layers",slug:"/Layers/Containers Layer",permalink:"/Porto/docs/Layers/Containers Layer",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Layers/Containers Layer.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Layers Overview",permalink:"/Porto/docs/Layers/Layers Overview"},next:{title:"Ship Layer",permalink:"/Porto/docs/Layers/Ship Layer"}},c={},l=[{value:"Containers Structure",id:"containers-structure",level:2},{value:"Basic Containers Structure",id:"basic-containers-structure",level:3},{value:"Sections",id:"sections",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"containers-layer",children:"Containers Layer"}),"\n",(0,o.jsxs)(n.p,{children:["The Container layer is the heart of the ",(0,o.jsx)(n.strong,{children:"Porto"})," architecture. Here is where the application-specific business logic lives, including all the Application features and functionalities. You'll spend 90% of your time working in this layer, developing new features, and maintaining existing ones."]}),"\n",(0,o.jsxs)(n.p,{children:["One of the main benefits of using ",(0,o.jsx)(n.strong,{children:"Porto"})," is that it manages the complexity of a problem by breaking it down into smaller, more manageable Containers. Each Container is designed to encapsulate a specific piece of functionality, making it easier to develop, test, and maintain."]}),"\n",(0,o.jsxs)(n.p,{children:["By organizing your code in this way, ",(0,o.jsx)(n.strong,{children:"Porto"})," helps you to create a more modular and reusable codebase. This makes it easier to scale and maintain your application over time, as well as reducing the amount of code duplication across different parts of your application."]}),"\n",(0,o.jsx)(n.p,{children:"Inside each container, you'll find a collection of components, particularly Actions and Tasks, which form the backbone of the Porto architecture."}),"\n",(0,o.jsxs)(n.p,{children:["Overall, the Containers layer is the key to building a maintainable and scalable application architecture with ",(0,o.jsx)(n.strong,{children:"Porto"}),"."]}),"\n",(0,o.jsx)("img",{src:"/Porto/img/porto_container_3.png",alt:"Porto Components",style:{width:"55%"}}),"\n",(0,o.jsxs)(n.p,{children:["Upon opening a container, you should quickly locate what you need. Each box in the preceding image represents a code file, clearly labeled for easy identification. Business logic resides in ",(0,o.jsx)(n.code,{children:"Tasks"}),", each containing a single public function. By examining a file's descriptive name, you can infer its contents, enabling swift navigation through your code."]}),"\n",(0,o.jsxs)(i,{children:[(0,o.jsx)("summary",{children:"Example 1: TODO App"}),(0,o.jsx)(n.p,{children:"For example, in a TODO App, the 'Task', 'User', and 'Calendar' objects would each live in a different Container, with its own Routes, Controllers, Models, Exceptions, and more. Each Container is responsible for receiving requests and returning responses from whichever supported UI (Web, API, etc.)."}),(0,o.jsx)(n.p,{children:"While it's advised to use a Single Model per Container, in some cases, you may need more than one Model, and that's perfectly fine. You could also have Value Objects, which are similar to Models but don't get represented in the DB on their tables but as data on the Models. These objects get built automatically after their data is fetched from the DB, such as Price, Location, Time, and more."}),(0,o.jsx)(n.p,{children:"It's important to keep in mind that two Models mean two Repositories, two Transformers, and more. Unless you want to use both Models always together, split them into two Containers."}),(0,o.jsx)(n.p,{children:"If you have high dependencies between two Containers, placing them in the same Section would make reusing them easier in other projects."})]}),"\n",(0,o.jsxs)(i,{children:[(0,o.jsx)("summary",{children:"Example 2: Social Media App"}),(0,o.jsx)(n.p,{children:"In a social media application, you might have different Containers for 'Post', 'User', 'Comment', and 'Like'. Each of these Containers would handle its own logic, routes, controllers, models, exceptions, and more."}),(0,o.jsx)(n.p,{children:"For instance, the 'Post' Container might handle creating posts, deleting posts, and retrieving post details. The 'Comment' Container could handle adding comments to a post, deleting comments, and retrieving comments for a post."}),(0,o.jsx)(n.p,{children:"Just like in the first example, it's perfectly fine to have more than one Model in a Container if needed. However, remember that each Model would require its own Repository, Transformer, etc. If two Models are highly interdependent, consider placing them in the same Container for easier reuse."})]}),"\n",(0,o.jsx)(n.h2,{id:"containers-structure",children:"Containers Structure"}),"\n",(0,o.jsx)(n.p,{children:"To ensure consistency and ease of maintenance, all containers MUST adhere to the same structure. While they may house different component types, the overall structure must remain uniform. This approach facilitates code navigation, allowing maintainers to quickly locate the components they need."}),"\n",(0,o.jsx)(n.h3,{id:"basic-containers-structure",children:"Basic Containers Structure"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"ContainerA\n\n\u251c\u2500\u2500 Actions\n\u251c\u2500\u2500 Tasks\n\u251c\u2500\u2500 Models\n\u2514\u2500\u2500 UI\n    \u251c\u2500\u2500 WEB\n    \u2502   \u251c\u2500\u2500 Routes\n    \u2502   \u251c\u2500\u2500 Controllers\n    \u2502   \u2514\u2500\u2500 Views\n    \u251c\u2500\u2500 API\n    \u2502   \u251c\u2500\u2500 Routes\n    \u2502   \u251c\u2500\u2500 Controllers\n    \u2502   \u2514\u2500\u2500 Transformers\n    \u2514\u2500\u2500 CLI\n        \u251c\u2500\u2500 Routes\n        \u2514\u2500\u2500 Commands\n\nContainerB\n\n\u251c\u2500\u2500 Actions\n\u251c\u2500\u2500 Tasks\n\u251c\u2500\u2500 Models\n\u2514\u2500\u2500 UI\n    \u251c\u2500\u2500 WEB\n    \u2502   \u251c\u2500\u2500 Routes\n    \u2502   \u251c\u2500\u2500 Controllers\n    \u2502   \u2514\u2500\u2500 Views\n    \u251c\u2500\u2500 API\n    \u2502   \u251c\u2500\u2500 Routes\n    \u2502   \u251c\u2500\u2500 Controllers\n    \u2502   \u2514\u2500\u2500 Transformers\n    \u2514\u2500\u2500 CLI\n        \u251c\u2500\u2500 Routes\n        \u2514\u2500\u2500 Commands\n"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"If you're not familiar with separating your code into Modules / Domains or if you prefer not to use that approach, you can create your entire Application in a single Container. However, this is not recommended and may not be as scalable or maintainable for larger projects over time."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"sections",children:"Sections"}),"\n",(0,o.jsx)(n.p,{children:"Section are another very important aspect in the Porto architecture."}),"\n",(0,o.jsxs)(n.p,{children:["A ",(0,o.jsx)(n.strong,{children:"Section"})," is a group of related containers. It can be a ",(0,o.jsx)(n.strong,{children:"service"})," ",(0,o.jsx)(n.em,{children:"(micro or bigger)"}),", or a sub-system within the main system, or anything else."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.em,{children:"Think of a Section as a rows of containers on a cargo ship. Well organized containers in rows, speeds up the loading and unloading of related containers for a specific customer."})}),"\n",(0,o.jsx)(n.p,{children:"The basic definition of a Section is a folder that contains related Containers. However the benefits are huge. (A section is equivalent to a bounded context from the Domain-driven design) Each section represents a portion of your system and is completely isolated from other sections."}),"\n",(0,o.jsxs)(n.p,{children:["A Section can be deployed separately. This architecture allows for a loose coupling between Sections, enabling a more scalable and flexible system. ",(0,o.jsx)(n.code,{children:"Events"})," and ",(0,o.jsx)(n.code,{children:"Commands"})," can be used to communicate between different Sections, allowing for easy expansion and modification of the system over time."]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["A ",(0,o.jsx)(n.strong,{children:"Section"})," is a block of bays on a cargo ship. A 'bay' refers to a designated storage area on a cargo ship where containers are placed."]}),"\n"]}),"\n",(0,o.jsxs)(i,{children:[(0,o.jsx)("summary",{children:"Example 1: E-commerce App"}),(0,o.jsx)(n.p,{children:"In a typical e-commerce application, you might have several sections, each corresponding to a different aspect of the business:"}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Inventory Section"}),": This section could contain Containers like 'Product', 'Stock', and 'Supplier'. The 'Product' Container might handle listing products and showing product details, while the 'Stock' Container could manage stock levels, and the 'Supplier' Container could manage supplier information and relationships."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Shipping Section"}),": This section might have Containers like 'Delivery', 'Courier', and 'Tracking'. The 'Delivery' Container could handle scheduling deliveries, the 'Courier' Container could manage courier information, and the 'Tracking' Container could provide real-time tracking information for deliveries."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Order Section"}),": This section could include Containers like 'Cart', 'Order', and 'Invoice'. The 'Cart' Container might manage adding and removing items from the cart, the 'Order' Container could handle placing orders and updating order status, and the 'Invoice' Container could generate invoices for completed orders."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Payment Section"}),": This section might have Containers like 'PaymentMethod', 'Transaction', and 'Refund'. The 'PaymentMethod' Container could manage different payment methods, the 'Transaction' Container could handle processing payments, and the 'Refund' Container could manage refund requests."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Catalog Section"}),": This section could contain Containers like 'Category', 'Brand', and 'Review'. The 'Category' Container might manage product categories, the 'Brand' Container could manage brand information, and the 'Review' Container could handle customer reviews for products."]}),"\n"]}),"\n"]}),(0,o.jsx)(n.p,{children:"Each of these sections could potentially be a micro-service by itself and could be extracted and deployed on its own server based on the traffic it receives."})]}),"\n",(0,o.jsxs)(i,{children:[(0,o.jsx)("summary",{children:"Example 2: Racing Game"}),(0,o.jsx)(n.p,{children:"If you're building a racing game like Need for Speed, you may have the following two sections: the Race Section and the Lobby Section, where each section contains a Car Container and a Car Model inside it, but with different properties and functions.\nIn this example the Car Model of the Race section can contain the business logic for accelerating and controlling the car, while the Car Model of the Lobby Section contains the business logic for customizing the car (color, accessories..) before the race."}),(0,o.jsx)(n.p,{children:"Sections allows separating large Model into smaller ones. And they can provide boundaries for different Models in your system."}),(0,o.jsx)(n.p,{children:'If you prefer simplicity or you have only single team working on the project, you can have no Sections at all (where all Containers live in the containers folder) which means your project is a single section. In this case if the project grew quickly and you decided you need to start using sections, you can make a new project also with a single section, this is known as Micro-Services. In Micro-Services each section "project portion" live in its own project (repository) and they can communicate over the network usually using the HTTP protocol.'})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>s});var o=i(6540);const t={},r=o.createContext(t);function a(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);